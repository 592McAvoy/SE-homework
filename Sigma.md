# Sigma
## Characteristic
### Sigma基础架构图
![Sigma基础架构图](https://github.com/592McAvoy/homework1/blob/master/%E5%9B%BE%E7%89%87/%E6%9E%B6%E6%9E%84%E5%9B%BE.png)
### 统一大资源池模式
最初阿里的调度系统是T4系统，T4将资源分为各个小组（大部分都是小规模小组），将各个部门的资源池独立出来，并且独立研发多套调度系统。
这样的调度系统具有明显的缺点：
- 规模：各T4分组规模不一，大部分都是小规模：资源碎片化。
- 调度：T4分组内小规模调度，核心应用打散受限。
- 资源分配：双11期间参差不齐，表现在交易相关CPU充分售卖，无空闲CPU；但众多T4分组，宿主机尚未分配容器实例。

![T4架构图](https://github.com/592McAvoy/homework1/blob/master/%E5%9B%BE%E7%89%87/T4.png)

随后阿里对其进行了改变，即之后的Sigma系统架构，其主要体现在云化架构、混合云：
- 规模：统一大资源池模式。
- 调度：大资源池下，Sigma调度对核心应用的各种策略保障，得以更充分地发挥价值。
- 资源分配：双11充分只用了所有资源，没有闲置。

![Sigma架构图](https://github.com/592McAvoy/homework1/blob/master/%E5%9B%BE%E7%89%87/Sigma.png)

### 兼容性
Sigma兼容Kubernetes API，和开源社区共建。同时，即便在Sigma中阿里并没有使用比较普遍的docker容器而是自行研发的Pouch容器，但其依旧兼容OCI标准。

### 灵活可配置的调度策略
Sigma允许以插件化地方式基于外部输入实时调控集群打分模型，并且允许用户配置优化调度策略。业务团队开发出新的策略，可立即配置生效，不需要代码发布。

### 离线任务与在线任务混部
详见Sigma与Fuxi混部架构

## Sigma与Fuxi混部架构
Fuxi和Sigma都是阿里的调度架构，但Fuxi是一个离线计算引擎，主要解决离线任务。
阿里根据流量走势，动态对Sigma和Fuxi进行扩容和缩容，以进一步提高利用率。

![混部](https://github.com/592McAvoy/homework1/blob/master/%E5%9B%BE%E7%89%87/%E6%B7%B7%E9%83%A8.png)

## Pros & Cons
### Pros
如前文所说，Sigma具有如下的优点：
- 利用率高：Sigma摒弃了之前阿里调度架构的小规模、碎片化的缺点，采用统一大资源池模式，大幅提升利用率。
- 兼容性好：兼容目前比较流行的Kubernetes调度系统的API。
- 灵活度高：可以自行配置调度策略而无需代码发布。
- 混部提升利用率：与Fuxi结合的混部架构，采取分时复用，动态分配容量，进一步提升资源利用率。

### Cons
- 在与Fuxi混部方面，容量预测目前还是个挑战，并且扩容缩容的稳定性还没有办法得到保证。

## Comments
Sigma是一个非常优秀的调度框架，其中相对于原来T4的进步主要在于实现了统一大资源池模式更高效地使用了资源。而Sigma和Fuxi的混部更像是天然契合，根据流量走势而动态分配离线、在线任务容量的想法也非常具有可行性和有效性。

但Sigma在双11表现十分优秀很大程度上也由于Sigma对于双11的特殊情况做了许多specific的优化，它在一般情况上的表现是否优于别的调度架构仍不确定。
